---
import Page from '@/layouts/astro/Page.astro';
import UnionView from '@/islands/UnionView.vue';
import { getUnionData } from '@/utils/data.ts';

const { union } = Astro.props;

import { unions } from '@/utils/unions';
export async function getStaticPaths() {
  return unions.map((union) => ({
    params: { slug: union.slug },
    props: { union },
  }));
}

const year = new Date().getFullYear().toString();
const { clubs, leagues, fixtures, standings } = await getUnionData(union.slug, year);
---

<Page>
  <UnionView
    client:only="vue"
    union={union}
    clubs={clubs}
    leagues={leagues}
    standings={standings}
    fixtures={fixtures}
  />
</Page>
