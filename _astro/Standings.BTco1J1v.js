import{w}from"./runtime-dom.esm-bundler.BF-HUS4i.js";/* empty css                           */import{_ as S}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{e as d,f as i,F as y,g as h,r as v,d as k,j as t,t as r,i as l,x as O,y as P,k as B}from"./runtime-core.esm-bundler.Bb5PrzAY.js";import{u as D}from"./useSavedLeagues.DVBjr-1M.js";const I={__name:"StandingsTable",props:{standings:Object,clubs:Object,leagues:Object,lastModified:String},setup(b,{expose:c}){c();const n=v("pts"),s=v("desc"),_=[{key:"gp",label:"P"},{key:"w",label:"W"},{key:"l",label:"L"},{key:"d",label:"D"},{key:"pts",label:"PTS"},{key:"pf",label:"PF"},{key:"pa",label:"PA"},{key:"diff",label:"PD"}];function u(o){n.value===o?s.value=s.value==="asc"?"desc":"asc":(n.value=o,s.value="desc")}const a=k(()=>Object.entries(b.standings).map(([o,x])=>{const j=Object.values(x).slice().sort((f,g)=>{const m=f[n.value],p=g[n.value];if(m===p){if(n.value!=="pts"){const C=g.pts-f.pts;return C!==0?C:g.diff-f.diff}return g.diff-f.diff}return s.value==="asc"?m-p:p-m});return{leagueId:o,teams:j}})),e={sortColumn:n,sortDirection:s,sortableColumns:_,sortBy:u,groupedStandings:a,ref:v,computed:k};return Object.defineProperty(e,"__isScriptSetup",{enumerable:!1,value:!0}),e}},L={class:"table-responsive-wrapper"},T={class:"table table-fixed table-striped align-middle text-center"},q={class:"text-start"},A=["onClick"],F={class:"text-start"},N={class:"d-flex align-items-center gap-2"},V=["src","alt"],M={class:"text-truncate"};function z(b,c,n,s,_,u){return i(),d("div",L,[(i(!0),d(y,null,h(s.groupedStandings,a=>(i(),d("div",{key:a.leagueId},[t("table",T,[t("thead",null,[t("tr",null,[t("th",q,r(n.leagues[a.leagueId].name||a.leagueId),1),(i(),d(y,null,h(s.sortableColumns,e=>t("th",{key:e.key,class:l(["sortable",{"has-border":s.sortColumn===e.key}]),style:{"white-space":"nowrap"}},[t("button",{onClick:w(o=>s.sortBy(e.key),["prevent"]),class:"w-100 bg-transparent border-0 text-dark p-0 m-0",style:{cursor:"pointer"}},[t("div",null,[t("strong",null,r(e.label),1)]),t("div",{class:l(["caret",{"text-primary":s.sortColumn===e.key,"text-light":s.sortColumn!==e.key}])},r(s.sortColumn===e.key&&s.sortDirection==="asc"?"▲":"▼"),3)],8,A)],2)),64))])]),t("tbody",null,[(i(!0),d(y,null,h(a.teams,e=>(i(),d("tr",{key:a.leagueId+"-"+e.team_id},[t("td",F,[t("div",N,[t("span",{class:l(e.pos<=4?"badge bg-primary":"badge bg-secondary")},r(e.pos),3),n.clubs[e.team_id]?.logo?(i(),d("img",{key:0,src:n.clubs[e.team_id].logo,alt:n.clubs[e.team_id].name,width:"32",height:"32",style:{"object-fit":"contain"}},null,8,V)):O("",!0),t("div",M,[t("b",null,r(n.clubs[e.team_id]?.name||e.team_id),1)])])]),t("td",{class:l({"has-border":s.sortColumn==="gp"})},r(e.gp),3),t("td",{class:l({"has-border":s.sortColumn==="w"})},r(e.w),3),t("td",{class:l({"has-border":s.sortColumn==="l"})},r(e.l),3),t("td",{class:l({"has-border":s.sortColumn==="d"})},r(e.d),3),t("td",{class:l({"has-border":s.sortColumn==="pts"})},[t("strong",null,r(e.pts),1)],2),t("td",{class:l({"has-border":s.sortColumn==="pf"})},r(e.pf),3),t("td",{class:l({"has-border":s.sortColumn==="pa"})},r(e.pa),3),t("td",{class:l({"has-border":s.sortColumn==="diff"})},r(e.diff),3)]))),128))])])]))),128))])}const E=S(I,[["render",z],["__scopeId","data-v-1d90fbc3"]]),W=P({__name:"Standings",props:{standings:{type:Array,required:!0},clubs:{type:Object,required:!0},leagues:{type:Object,required:!0}},setup(b,{expose:c}){c();const n=b,{savedLeagues:s}=D(),_=k(()=>{const a={};for(const e of n.standings){const o=e.league_id;s.value.includes(o)&&(a[o]||(a[o]=[]),a[o].push(e))}return a}),u={props:n,savedLeagues:s,filteredStandings:_,StandingsTable:E};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}}),H={key:0,class:"mt-3"},J={key:1};function K(b,c,n,s,_,u){return Object.keys(n.standings).length?(i(),d("div",H,[B(s.StandingsTable,{standings:s.filteredStandings,clubs:n.clubs,leagues:n.leagues},null,8,["standings","clubs","leagues"])])):(i(),d("div",J,c[0]||(c[0]=[t("p",null,"Loading standings...",-1)])))}const Z=S(W,[["render",K]]);export{Z as default};
